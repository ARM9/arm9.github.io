"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function preload(){for(var e=0;e<arguments.length;e++)images[e]=new Image,images[e].src=arguments[e]}function render(){var e=Math.sin(frame/280),t=Math.sin(frame/180);camera.pos.x=300+120*t,camera.pos.y=40*e-200,camera.pos.z=250,camera.rot.z-=.001,scene.render(),ground.style.transform="translate3d("+camera.pos.x+"px, "+camera.pos.y+"px, "+camera.pos.z+"px) rotateX("+camera.rot.x+"rad) rotateY("+camera.rot.y+"rad) rotateZ("+camera.rot.z+"rad)",frame++,requestAnimationFrame(render)}function setLevel(e){console.log(e.texture),ground.style.backgroundImage="url("+e.texture+")",scene.style.background=e.background}function main(){setLevel(levels[0]),requestAnimationFrame(render)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),donut1="./assets/levels/donut1.png",beach1="./assets/levels/beach1.png",circuit1="./assets/levels/circuit1.png",vanilla2="./assets/levels/vanilla2.png",choco2="./assets/levels/choco2.png",rainbow="./assets/levels/rainbow.png",spook3="./assets/levels/spook3.png",meryo_sprite="./assets/sprites/meryo.png",loogi_sprite="./assets/sprites/loogi.png",peach_sprite="./assets/sprites/peach.png",toad_sprite="./assets/sprites/toad.png",yosh_sprite="./assets/sprites/yosh.png",koop_sprite="./assets/sprites/koop.png",bows_sprite="./assets/sprites/bows.png",dkjr_sprite="./assets/sprites/dkjr.png",lakitu_sprite="./assets/sprites/lakitu.png",images=new Array;preload(donut1,beach1,circuit1,vanilla2,choco2,rainbow,spook3);var Vec3=function(){function e(t,r,s){_classCallCheck(this,e),this.x=t||0,this.y=r||0,this.z=s||0}return _createClass(e,[{key:"set",value:function(e,t,r){this.x=e,this.y=t,this.z=r}}]),e}(),Entity=function(){function e(t,r,s){_classCallCheck(this,e),this.pos=t||new Vec3,this.rot=r||new Vec3,this.scale=s||new Vec3(1,1,1)}return _createClass(e,[{key:"render",value:function(e){}}]),e}(),Sprite=function(e){function t(e,r,s,n){var a=e.img,i=e.width,o=e.height;_classCallCheck(this,t);var l=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,s,n));return l.el=document.createElement("div"),l.el.style="width:"+i+"px; height:"+o+"px;",l.el.style.backgroundImage="url('"+a+"')",l.el.style.transformStyle="preserve-3d",l.el.style.transformOrigin=i/2+"px "+o/2+"px",l}return _inherits(t,Entity),_createClass(t,[{key:"render",value:function(e){this.style.rotateX=e.rot.x+this.rot.x+"rad",this.style.rotateY=e.rot.y+this.rot.y+"rad",this.style.rotateZ=e.rot.z+this.rot.z+"rad",this.style.transform="translate3d("+(e.pos.x+this.pos.x)+"px, "+(e.pos.y+this.pos.y)+"px, "+(e.pos.z+this.pos.z)+"px) scale3d("+this.scale.x+", "+this.scale.y+", "+this.scale.z+")"}},{key:"style",set:function(e){this.el.style=e},get:function(){return this.el.style}}]),t}(),Scene=function(){function e(t,r,s){_classCallCheck(this,e),this.el=document.getElementById("scene"),this.camera=r,this.entities=s;var n=!0,a=!1,i=void 0;try{for(var o,l=this.entities[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=o.value;this.el.appendChild(c.el)}}catch(e){a=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw i}}}return _createClass(e,[{key:"setCamera",value:function(e){this.camera=e}},{key:"render",value:function(){var e=!0,t=!1,r=void 0;try{for(var s,n=this.entities[Symbol.iterator]();!(e=(s=n.next()).done);e=!0)s.value.render(this.camera)}catch(e){t=!0,r=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw r}}}},{key:"style",set:function(e){this.el.style=e},get:function(){return this.el.style}}]),e}(),camera=new Entity(new Vec3(0,-50,0),new Vec3(Math.PI/2-.69,0,0)),lakitu=new Sprite({img:lakitu_sprite,width:35,height:32},new Vec3(120,-500,0),new Vec3(-90,0,0));lakitu.style.filter="drop-shadow(19px 40px 3px rgba(0, 0, 0, 0.4))";var bows=new Sprite({img:bows_sprite,width:32,height:32},new Vec3(300,-590,-170),new Vec3(-90,0,0)),toad=new Sprite({img:toad_sprite,width:32,height:32},new Vec3(10,-600,-250),new Vec3(-90,0,0),new Vec3(-1,1,1)),koop=new Sprite({img:koop_sprite,width:32,height:32},new Vec3(-19,-600,-170),new Vec3(-90,0,0),new Vec3(1,1,1)),meryo=new Sprite({img:meryo_sprite,width:32,height:32},new Vec3(467,-739,-250),new Vec3(-90,0,0)),ground=new Sprite({img:donut1,width:1024,height:1024},new Vec3(0,0,0),new Vec3(0,0,0));ground.style.transition="background-image 2s ease-in-out";var scene=new Scene("scene",camera,[ground,bows,toad,lakitu,meryo,koop]),frame=0,levels=[{texture:donut1,background:"#70d8e0"},{texture:beach1,background:"#40d4d8"},{texture:circuit1,background:"#70e0e8"},{texture:choco2,background:"linear-gradient(#f49040, #3060b8)"},{texture:spook3,background:"#020004"},{texture:vanilla2,background:"#b0b8e0"},{texture:rainbow,background:"#06000f"}],curr_level=0;setInterval(function(){setLevel(levels[++curr_level%levels.length])},9e3),addEventListener("keydown",function(e){switch(e.key){case"a":setLevel(levels[++curr_level%levels.length])}}),main();